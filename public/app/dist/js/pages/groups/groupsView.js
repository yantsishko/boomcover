define(["app","marionette","backbone","underscore","pace","text!templates/groups/index.ejs","./collectionView","enjoyhint"],function(t,o,n,i,s,e,r,u){"use strict";return o.LayoutView.extend({template:i.template(e),initialize:function(){this.userGroups=null;var o=this;n.$.ajax({async:!1,url:t.url+"/api/v1/groups",success:function(t){o.userGroups=new n.Collection(t)},error:function(t){401==t.status&&(window.location="/login")}})},regions:{groups:"[data-selector=groups]"},events:{"click [data-action=update-groups]":"updateGroups"},onShow:function(){var t={collection:this.userGroups};this.showChildView("groups",new r(t)),this.showHints=window.localStorage.getItem("showHintsNotifications")||!0,this.showHintsAction=window.localStorage.getItem("showHintsActions")||!0;var o=new EnjoyHint({onStart:function(){window.localStorage.setItem("showHintsActions",!1)}}),n=[{"click #vk_buttons":"Хотите получить дополнительно 5 бесплатных дней? Вступите в группу и напишите нам об этом! <br> Также подпишитесь на уведомления, чтоб получать от нас новости о новых виджетах",skipButton:{text:"Хорошо"}}];o.set(n),!0===this.showHintsAction&&o.run()},updateGroups:function(){n.$.ajax({async:!1,url:t.url+"/api/v1/groups",success:function(){location.reload()},error:function(t){401==t.status&&(window.location="/login")}})}})});