define(["app","marionette","backbone","underscore","pace","text!templates/history/index.ejs","jquery","daterangepicker","moment"],function(t,e,n,a,r,i,s,o,u){"use strict";return e.LayoutView.extend({template:a.template(i),initialize:function(){this.model.set("userBCHistory",null);var e=this;n.$.ajax({async:!1,url:t.url+"/api/v1/history",success:function(t){e.model.set("userBCHistory",t)},error:function(t){401==t.status&&(window.location="/login")}})},ui:{minDatePicker:"#daterange-btn"},events:{},onRender:function(){this.ui.minDatePicker.daterangepicker({ranges:{"Текущий месяц":[u().startOf("month"),u().endOf("month")],"Предыдущий месяц":[u().subtract(1,"month").startOf("month"),u().subtract(1,"month").endOf("month")]},startDate:u().subtract(29,"days"),endDate:u()},function(t,e){s("#daterange-btn span").html(t.format("MMMM D, YYYY")+" - "+e.format("MMMM D, YYYY"))})}})});