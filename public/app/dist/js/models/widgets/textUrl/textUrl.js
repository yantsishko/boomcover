define(["app","marionette","backbone","underscore","text!templates/widgets/textUrl/index.ejs","bootstrapcolorpicker","datetimepicker","moment","notify"],function(t,e,n,i,o,l,r,s,a){"use strict";return e.ItemView.extend({template:i.template(o),events:{"change select[name=textUrl_gmt]":"changeGmt","change select[name=textUrl_font]":"changeFont","change input[name=textUrl_register]":"toggleRegister","change input[name=textUrl_time_show]":"toggleTimeText","change input[name=textUrl_url]":"url","change input[name=textUrl_bold]":"fontBold","change input[name=textUrl_italic]":"fontItalic","change input[name=textUrl_tiny]":"fontTiny"},initialize:function(t){},onRender:function(){this.setSliders();var t=this;this.$el.find("#textUrl_color").colorpicker().on("changeColor",function(){t.$el.find("#textUrl_color_p_1").css("background",t.$el.find(this).colorpicker("getValue","#ffffff")),t.model.set("color",t.$el.find(this).colorpicker("getValue","#ffffff"))})},url:function(t){var e=this;""!=t.target.value&&n.$.ajax({url:t.target.value,success:function(t){e.model.set("text",t)},error:function(t){n.$.notify("Неправильная ссылка в виджете текста","error"),401==t.status&&(window.location="/login")}}),this.model.set("url",t.target.value)},changeGmt:function(){var t=this.$el.find("[name=textUrl_gmt]").val();this.model.set("gmt",t)},changeFont:function(){var t=this.$el.find("[name=textUrl_font]").val();this.model.set("font",t)},fontBold:function(t){t.target.checked?this.model.set("fontWeight","700"):this.model.set("fontWeight","none")},fontItalic:function(t){t.target.checked?this.model.set("italic",!0):this.model.set("italic",!1)},fontTiny:function(t){t.target.checked?this.model.set("fontWeight","300"):this.model.set("fontWeight","none")},toggleRegister:function(t){t.target.checked?this.model.set("uppercase",!0):this.model.set("uppercase",!1)},toggleTimeText:function(t){t.target.checked?(this.$el.find("#textUrl_time").show(),this.model.set("showTextTime",!0)):(this.$el.find("#textUrl_time").hide(),this.model.set("showTextTime",!1))},setSliders:function(){var t=this;this.$el.find("#textUrl_start").datetimepicker({format:"YYYY-MM-DD HH:mm"}),this.$el.find("#textUrl_start").on("dp.change",function(e){t.model.set("textStart",e.date.format("YYYY-MM-DD HH:mm"))}),this.$el.find("#textUrl_end").datetimepicker({format:"YYYY-MM-DD HH:mm"}),this.$el.find("#textUrl_end").on("dp.change",function(e){t.model.set("textEnd",e.date.format("YYYY-MM-DD HH:mm"))}),this.$el.find("#textUrl_size").ionRangeSlider({type:"single",min:14,max:80,from:t.model.get("size"),step:1,postfix:" px",onChange:function(e){t.model.set("size",e.from)}})}})});